<html>
    <head>
        <!-- linking the external files from font awesome and vuejs-->
        <link rel="stylesheet"href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
        <script src = "https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

        <!-- linking the lesson plan script-->
        <script src="lessons.js"></script>
        <style>
            body{
                margin:0;
            }
            #lessonBlock{
                background-color: black;
                color:white;
                padding:35px;
                width:15%;
                height:30%;
                margin:2%;
                border:3%;

            }
        </style>

    </head>
    <body>

        <!-- Container Div-->
        <div id="lessonplanapp">
            <!-- Shoppping Cart Button -->
            <div>
                <button>
                    <!-- create logic to switch between checkout and lesson plan? -->
                    {{cartAggregate}} Checkout
                </button>

            </div>


            <!-- Main Body -->
            <!-- Lesson Plans Division-->
            <div id="lessonDisplayDiv">

                <!-- Page Subtile -->
                <div><span style="font-weight: bold; font-family:'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif; font-size: x-large;" v-text="lessonsub"></span></div>

                <!-- ||||||||||| ADD font awesome icon  ||||||||||| -->
                <!-- Displaying Lessons individually -->
                <div id="lessonBlock" v-for="lesson in lessons" style="display:inline-block;">
                    <div v-if="lesson.showLesson">
                        <!-- lesson information -->
                        <h2 v-text="lesson.Subject"></h2>
                        <img style="width:50px;height:50px" v-bind:src="lesson.image">
                        <h4 v-text="lesson.Location"></h4>
                        <h4 v-text="lesson.price"></h4>

                        <!-- Cart Button -->
                        <button v-if="canAddTocart(lesson)" v-on:click="addtoCart(lesson)">
                            Add To Cart
                        </button>
                        <button v-else disabled>
                            Add To Cart
                        </button>

                        <!-- product count message-->
                        <span v-if="canAddTocart(lesson) == false ">
                            All Spaces Booked!
                        </span>
                        <!-- only less than 3 left -->
                        <span v-else-if="lesson.spaces <= 3">Only {{lesson.spaces}} Spaces Left! </span>
                        

                    </div>


                </div>

            </div>

            <!-- Checkout and Shopping Cart Division -->

        </div>


        <!-- Vuejs Script -->
        <script type="text/javascript">
            var webstore = new Vue({
                el:lessonplanapp,
                data:{
                    lessonsub: 'Browse Our Lesson Catalogue',
                    lessons:lessons,
                    cart:[]

                },
                methods:{
                    canAddTocart: function(course) {
                        if (course.spaces > 0){
                            return true;
                        }
                        else {
                            return false;
                        }
                    },
                    addtoCart: function(course) {
                        this.cart.push(course);
                        course.spaces = course.spaces - 1;
                    }

                },
                computed:{
                    cartAggregate: function(){
                        return this.cart.length;
                    }

                }
            })
        </script>


    </body>
</html>